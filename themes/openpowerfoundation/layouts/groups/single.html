{{ partial "header.html" . }}
{{ partial "navbar.html" . }}
{{ $filename := .File.BaseFileName }}
{{ $groupdatafile := index $.Site.Data.groups $filename }}
<main id="main">
<section id="workgroupsingle">
	<div id="workgroupsingle" class="container-fluid">
		<div class="section-header">
			<div class="row">
				<div class="col-lg-12 text-center mb-lg-4">
					<h1 class="section-title">{{ .Title }}</h1>
					<span class="section-divider"></span>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-5 offset-lg-2 pr-4">
					{{ if .Content }}
					{{ .Content }}
					{{ else }}
					&nbsp;
					{{ end }}
				</div>
				<div class="col-lg-3 details">
					<ul>
						<li>Workgroup Details :
						<ul>
						{{ if .Param "chair" }}
							<li>Chair :<ul>
							{{ range (.Param "chair") }}
								{{ $chairfile := printf "%s/%s" "persons" . }}
								{{ with $.Site.GetPage $chairfile }}
								<li><a href="{{ .Permalink }}">{{ .Title }}</a>
								{{ if .Param "member" }}
									{{ $memberfile := printf "%s/%s" "members" (.Param "member") }}
									{{ with $.Site.GetPage $memberfile }}
										(<a href="{{ .Permalink }}">{{ .Title }}</a>)
									{{ end }}
								{{ end }}
								{{ end }}
								</li>
							{{ end }}
							</ul></li>
						{{ end }}
						{{ if .Param "wgtype" }}
							{{ $data := index $.Site.Data }}
							{{ $wgtype := .Param "wgtype" }}
							{{ range $data.workgroups }}
								{{ if eq $wgtype .id }}
									<li>Type : {{ .name }}</li>
								{{ end }}
							{{ end }}
						{{ end }}
						{{ if .Param "participation" }}
							<li>
								Participation : {{ .Param "participation" }}
								{{ if eq (.Param "participation") "Public" }}
									<i class="fa fa-universal-access" aria-hidden="true"></i>
								{{ end }}
								{{ if eq (.Param "participation") "Members" }}
									<i class="fa-solid fa-users" aria-hidden="true"></i>
								{{ end }}
								{{ if eq (.Param "participation") "Limited" }}
									<i class="fas fa-user-lock" aria-hidden="true"></i>
								{{ end }}
							</li>
						{{ end }}
						</ul>
						</li>
						<li>Workgroup Involvment
						<ul>
						{{ if .Param "cadence" }}
							<li>Workgroup Meeting Cadence :<br>{{ .Param "cadence" }}<br></li>
{{ if $groupdatafile.nextmeeting }}
{{ $today := int (now.Format "20060102") }}
{{ $nextmeetingdate := $groupdatafile.nextmeeting.date }}
{{ $nextmeetingday := int ((time $groupdatafile.nextmeeting.date).Format "20060102") }}
{{ $nextmeetingtime := $groupdatafile.nextmeeting.time }}
{{ $datediff := (sub $today $nextmeetingday) }}
{{ if lt $datediff 0 }}
							<li>Next meeting on :<br>
<div class="tooltip-wrapper">
<i class="fa-solid fa-calendar-clock"></i>&nbsp;
{{ $datetime := time (printf "%sT%s:00.00+00:00" $nextmeetingdate $nextmeetingtime) }}
{{ $datetime.Format "2" }}{{ if in (slice 1 21 31) $datetime.Day}}st{{ else if in (slice 2 22) $datetime.Day}}nd{{ else if in (slice 3 23) $datetime.Day}}rd{{ else }}th{{ end }} of {{ $datetime.Format "January 2006" }}
@ {{ $nextmeetingtime }} UTC
<div class="tooltip-text">
<strong>
<script>
var date = new Date();
var timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
var localtime = new Date({{ $nextmeetingdate }}+"T"+{{ $nextmeetingtime }}+":00Z");
var datesuffix = "";
switch (localtime.getDate()) {
	case 1:
		datesuffix = "st";
		break;
	case 21:
		datesuffix = "st";
		break;
	case 31:
		datesuffix = "st";
		break;
	default:
		datesuffix = "nd";
}
document.write(localtime.getDate()+datesuffix+" of "+localtime.toLocaleString('default', { month: 'long' })+" "+localtime.getFullYear());
document.write("<br>");
document.write(String(localtime.getHours()).padStart(2,"0")+":"+String(localtime.getMinutes()).padStart(2,"0"));
document.write("&nbsp;"+timezone);
</script>
</strong>
</div>
{{ end }}
{{ end }}
							</li>
						{{ end }}
						</ul>
						</li>
						<li>Workgroup Resources :
						<ul>
						{{ if .Param "discussion" }}
							<li><a href="{{ .Param "discussion" }}"><i class="fas fa-bullhorn"></i> Discussion</a></li>
						{{ end }}
						{{ if .Param "meetingminutes" }}
							<li><a href="{{ .Param "meetingminutes"}}"><i class="fas fa-pencil-alt"></i> Meeting Minutes</a></li>
						{{ end }}
						{{ if .Param "calendar" }}
							<li><i class="fas fa-calendar-alt"></i> Calendar :<ul>
								<li><a href="{{ .Param "calendar.web" }}">WebCal</a></li>
								<li><a href="{{ .Param "calendar.ics" }}">ICS</a></li>
							</ul></li>
						{{ end }}
						{{ if .Param "git" }}
							<li><a href="{{ .Param "git" }}"><i class="fab fa-git-square"></i> Git SCM</a></li>
						{{ end }}
						{{ if .Param "chat" }}
							<li><i class="fas fa-comments"></i> Chat<ul>
								<li><a href="{{ .Param "chat.mattermost" }}">OPF Chat</a></li>
								{{ if .Param "chat.slack" }}
								<li><a href="{{ .Param "chat.slack" }}">OPF Slack</a></li>
								{{ end }}
								{{ if .Param "chat.irc" }}
								<li>{{ .Param "chat.irc" }}</li>
								{{ end }}
							</ul></li>
						{{ end }}
						{{ if .Param "files" }}
							<li><a href="{{ .Param "files" }}"><i class="fas fa-folder-open"></i> Files</a></li>
						{{ end }}
						{{ if .Param "kanban" }}
							<li><a href="{{ .Param "kanban" }}"><i class="fas fa-tasks"></i> Kanban</a></li>
						{{ end }}
						</ul>
					{{ if $groupdatafile.members }}
						<li>Active Voting Work Group Members :
						<ul><li><ul>
						{{ range $member := $groupdatafile.members }}
							{{ $memberfile := printf "%s/%s" "members" $member }}
							{{ with $.Site.GetPage $memberfile }}
								<li>
								<a href="{{ .Permalink }}">
								{{ if .Param "image" }}
									{{ $imagename := .Param "image" }}
									{{ $imagelocation := (printf "%s/%s" "images/members/" $imagename) }}
									{{ $imageresource := resources.Get $imagelocation }}
									{{ $image := $imageresource.Fit "75x75 webp" }}
									<img src="{{  $image.RelPermalink }}" alt="{{ .Title }}" title="{{ .Title }}">
								{{ else }}
									{{ .Title }}
								{{ end }}
								</a>
								</li>
							{{ end }}
						{{ end }}
						</ul></li></ul>
						</li>
					{{ end }}
					</ul>
				</div>
				<div class="col-lg-2">&nbsp;</div>
			</div>
		</div>
	</div>
</section>
</main>
{{ partial "footer.html" . }}
